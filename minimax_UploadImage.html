<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Image</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <nav class="bg-gray-800 py-4">
        <div class="container mx-auto flex justify-center">
            <ul class="flex space-x-8">
                <li><a href="minimax_Text.html" class="text-yellow-400 hover:text-yellow-100">Text</a></li>
                <li><a href="minimax_Image.html" class="text-yellow-400 hover:text-yellow-100">Image</a></li>
                <li><a href="minimax_Subject-Reference.html" class="text-yellow-400 hover:text-yellow-100">Subject-Reference</a></li>
                <li><a href="minimax_Get.html" class="text-yellow-400 hover:text-yellow-100">GET Video</a></li>
                <li><a href="minimax_UploadImage.html" class="text-yellow-400 hover:text-yellow-100">Upload Image</a></li>
            </ul>
        </div>
    </nav>

    <div class="mt-4 p4 md:p-8 max-w-4xl mx-auto bg-white rounded-lg shadow-md overflow-hidden">
        <!-- Â§¥ÈÉ® -->
        <div class="bg-gradient-to-r from-gray-800 to-blue-300 text-white p-6 md:p-8">
            <h1 class="text-2xl md:text-3xl font-bold mb-2">Upload Image</h1>
            <p class="text-blue-100"></p>
        </div>
        
        <!-- ‰∏ä‰º†Âå∫Âüü -->
        <div class="p-6 md:p-8">
            <div id="drop-area" class="border-2 border-dashed border-gray-300 rounded-lg p-8 md:p-12 text-center cursor-pointer transition-all duration-300 hover:border-blue-400 hover:bg-blue-50">
                <div class="text-5xl mb-4 text-gray-400">üìÅ</div>
                <div class="text-xl font-medium text-gray-700 mb-2">Drag and drop images here to upload.</div>
                <div class="text-gray-500">Or click to select image file</div>
                <input type="file" id="file-input" class="hidden" accept="image/*" multiple>
            </div>

            <!-- Âà∑Êñ∞ÊåâÈíÆ -->
            <div class="mt-6 flex justify-center">
                <button id="refresh-button" class="bg-gray-800 hover:bg-gray-600 text-white py-3 px-6 rounded-lg transition-colors duration-200 flex items-center">
                    Refresh
                </button>
            </div>
            
            <!-- Êñá‰ª∂ÂàóË°® -->
            <h2 class="text-xl font-semibold mt-8 mb-4 text-gray-800">Photo Gallery</h2>
            <div id="file-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- ‰∏ä‰º†ÁöÑÊñá‰ª∂ÂàóË°®Â∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
            </div>

            <!-- Áä∂ÊÄÅÊòæÁ§∫ -->
            <div id="upload-status" class="mt-4"></div>
        </div>
    </div>

    <script>
        // È°µÈù¢ÂÖÉÁ¥†
        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('file-input');
        const fileList = document.getElementById('file-list');
        const uploadStatus = document.getElementById('upload-status');
        const refreshButton = document.getElementById('refresh-button');
        
        // Êú¨Âú∞Â≠òÂÇ®ÁöÑÈîÆÂêç
        const STORAGE_KEY = 'temporaryImages';
        
        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            updateFileList();
            
            // ‰∏ä‰º†Âå∫ÂüüÁÇπÂáª‰∫ã‰ª∂
            dropArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            // Êñá‰ª∂ÈÄâÊã©‰∫ã‰ª∂
            fileInput.addEventListener('change', function() {
                handleFiles(this.files);
            });
            
            // ÊãñÊîæ‰∫ã‰ª∂
            dropArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('border-blue-500', 'bg-blue-100');
                this.classList.remove('border-gray-300', 'hover:border-blue-400', 'hover:bg-blue-50');
            });
            
            dropArea.addEventListener('dragleave', function() {
                this.classList.remove('border-blue-500', 'bg-blue-100');
                this.classList.add('border-gray-300', 'hover:border-blue-400', 'hover:bg-blue-50');
            });
            
            dropArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('border-blue-500', 'bg-blue-100');
                this.classList.add('border-gray-300', 'hover:border-blue-400', 'hover:bg-blue-50');
                
                if (e.dataTransfer.files.length) {
                    handleFiles(e.dataTransfer.files);
                }
                
            });
        });

        // Âà∑Êñ∞ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            refreshButton.addEventListener('click', function() {
                
                setTimeout(() => {
                    window.location.reload();
                }, 100);
            });
        
        // Â§ÑÁêÜ‰∏ä‰º†ÁöÑÊñá‰ª∂
        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // Ê£ÄÊü•ÊòØÂê¶‰∏∫ÂõæÁâá
                // if (!file.type.match('image.*')) {
                //     alert('Please upload the image file.');
                //     continue;
                // }
                
                // Â∞ÜÂõæÁâáÊ∑ªÂä†Âà∞Êú¨Âú∞Â≠òÂÇ®
                saveImageToStorage(file);
            }
            
            // Êõ¥Êñ∞Êñá‰ª∂ÂàóË°®
            updateFileList();
        }
        
        // Â∞ÜÂõæÁâá‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
        function saveImageToStorage(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                // Ëé∑ÂèñÁé∞ÊúâÂõæÁâá
                let images = getStoredImages();
                
                // ÂàõÂª∫Êñ∞ÂõæÁâáÂØπË±°
                const imageObject = {
                    id: Date.now().toString() + Math.random().toString(36).substr(2, 5),
                    name: file.name,
                    size: formatFileSize(file.size),
                    timestamp: new Date().toLocaleString('zh-TW'),
                    data: e.target.result
                };
                
                // Ê∑ªÂä†Âà∞ÂõæÁâáÊï∞ÁªÑ
                images.push(imageObject);
                
                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                localStorage.setItem(STORAGE_KEY, JSON.stringify(images));
            };
            
            reader.readAsDataURL(file);
        }
        
        // ‰ªéÊú¨Âú∞Â≠òÂÇ®Ëé∑ÂèñÂõæÁâá
        function getStoredImages() {
            const stored = localStorage.getItem(STORAGE_KEY);
            return stored ? JSON.parse(stored) : [];
        }
        
        // Êõ¥Êñ∞‰∏ä‰º†Êñá‰ª∂ÂàóË°®ÊòæÁ§∫
        function updateFileList() {
            const images = getStoredImages();
            
            if (images.length === 0) {
                fileList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4 text-gray-300">üì∑</div>
                        <h3 class="text-lg font-medium text-gray-600">No images have been uploaded yet.</h3>
                        <p class="text-gray-500 mt-2">Click the area above or drag and drop an image to upload.</p>
                    </div>
                `;
                return;
            }
            
            fileList.innerHTML = images.map(image => `
                <div class="bg-white rounded-lg shadow overflow-hidden border border-gray-200 hover:shadow-md transition-shadow duration-300">
                    <img class="w-full h-auto object-cover" src="${image.data}" alt="${image.name}">
                    <div class="p-4">
                        <div class="font-medium text-gray-800 truncate">${image.name}</div>
                        <div class="text-sm text-gray-500 mt-1">${image.size} ‚Ä¢ ${image.timestamp}</div>
                        <button class="mt-3 w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-md transition-colors duration-200" onclick="removeImage('${image.id}')">
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Âà†Èô§ÂõæÁâá
        function removeImage(id) {
            if (confirm('Are you sure you want to delete this image?')) {
                let images = getStoredImages();
                images = images.filter(image => image.id !== id);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(images));
                updateFileList();
            }
        }
        
        // Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
